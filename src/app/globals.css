@tailwind base;
@tailwind components;
@tailwind utilities;

/* =============================================================================
   FOREST THEME - Design Tokens (CSS Variables)

   This is the SINGLE SOURCE OF TRUTH for theme colors.
   All Tailwind semantic classes reference these variables.

   Architecture:
   - Light mode: :root defines Forest Theme light mode
   - Dark mode: .dark defines Forest Theme dark mode
   - Future themes: Add [data-theme="new-theme"] blocks

   Color Palette (from logo):
   - Forest greens: #3D5A4C, #5B7B6D, #6B8B7D
   - Earth/terracotta: #A65D4D, #8B4A3D
   - Burgundy: #8B3A3A, #4A1F1F
   - Teal: #2D4A5A, #4A8A96
   - Sand/bark: #C4A77D, #8B7355, #6B5344
   - Sage: #5DB075 (brand green)
   ============================================================================= */

:root {
  /* Fonts */
  --font-inter: 'Inter', system-ui, sans-serif;
  --font-source-serif: 'Source Serif 4', Georgia, serif;

  /* ==========================================================================
     SURFACES - Cards, inputs, containers
     White is used for surfaces in light mode (per requirements)
     ========================================================================== */
  --surface-default: #FFFFFF;
  --surface-elevated: #FFFFFF;
  --surface-muted: #F9F6F2;      /* sand-100 */
  --surface-subtle: #FDFCFA;     /* sand-50 */

  /* ==========================================================================
     BACKGROUNDS - Page-level backgrounds
     ========================================================================== */
  --bg-primary: #FDFCFA;         /* sand-50 - warm off-white */
  --bg-secondary: #F9F6F2;       /* sand-100 */

  /* ==========================================================================
     PRIMARY - Main brand color (CTAs, active states)
     Forest green from logo
     ========================================================================== */
  --primary: #3D5A4C;            /* forest-600 */
  --primary-hover: #2D4A3C;      /* forest-700 */
  --primary-light: #E8EFE9;      /* forest-100 */
  --primary-foreground: #FFFFFF;

  /* ==========================================================================
     SECONDARY - Supporting brand color
     Sand/bark tones from logo
     ========================================================================== */
  --secondary: #A89070;          /* sand-600 */
  --secondary-hover: #8B7355;    /* sand-700 */
  --secondary-light: #F9F6F2;    /* sand-100 */
  --secondary-foreground: #FFFFFF;

  /* ==========================================================================
     ACCENT - Highlights, emphasis
     Terracotta/earth from logo
     ========================================================================== */
  --accent: #A65D4D;             /* earth-500 */
  --accent-hover: #8B4A3D;       /* earth-600 */
  --accent-light: #F5E8E6;       /* earth-100 */
  --accent-foreground: #FFFFFF;

  /* ==========================================================================
     TEXT COLORS
     ========================================================================== */
  --text-primary: #152E22;       /* forest-900 */
  --text-secondary: #2D4A3C;     /* forest-700 */
  --text-muted: #5B7B6D;         /* forest-500 */
  --text-inverse: #FFFFFF;

  /* ==========================================================================
     BORDERS
     ========================================================================== */
  --border: #E4D8C9;             /* sand-300 */
  --border-light: #F0E9E0;       /* sand-200 */
  --border-focus: #5B7B6D;       /* forest-500 */

  /* ==========================================================================
     STATUS COLORS
     ========================================================================== */
  --success: #5DB075;            /* sage-500 */
  --success-light: #E6F2EC;      /* sage-100 */

  --warning: #C4A77D;            /* sand-500 */
  --warning-light: #F9F6F2;      /* sand-100 */

  --error: #8B3A3A;              /* burgundy-500 */
  --error-light: #F5E6E6;        /* burgundy-100 */

  --info: #4A8A96;               /* teal-500 */
  --info-light: #E4EEF0;         /* teal-100 */

  /* ==========================================================================
     GRADIENTS - Pre-defined gradient stops for bg-gradient-to-*
     ========================================================================== */
  --gradient-primary-from: #3D5A4C;
  --gradient-primary-to: #2D4A3C;
  --gradient-secondary-from: #A89070;
  --gradient-secondary-to: #8B7355;
  --gradient-accent-from: #A65D4D;
  --gradient-accent-to: #8B4A3D;
}

/* =============================================================================
   DARK MODE - Forest Theme

   Background Strategy:
   - Page backgrounds use slate/navy tones for better readability during
     long study sessions (aligned with Home page dark:bg-slate-900)
   - Surfaces, accents, and gradients retain Forest palette colors
   ============================================================================= */

.dark {
  /* Surfaces - slate-tinted for cards/containers */
  --surface-default: #1e293b;    /* slate-800 - card backgrounds */
  --surface-elevated: #334155;   /* slate-700 - elevated cards */
  --surface-muted: #1e293b;      /* slate-800 - muted surfaces */
  --surface-subtle: #0f172a;     /* slate-900 - subtle backgrounds */

  /* Backgrounds - slate/navy for calm, readable dark mode */
  --bg-primary: #0f172a;         /* slate-900 - main page background */
  --bg-secondary: #1e293b;       /* slate-800 - secondary backgrounds */

  /* Primary - Forest green tones for brand identity */
  --primary: #6B8B7D;            /* forest-400 - lighter for dark mode */
  --primary-hover: #9BBAA1;      /* forest-300 */
  --primary-light: #1e3a2f;      /* forest-tinted slate for subtle bg */
  --primary-foreground: #0f172a;

  /* Secondary - Sand/bark tones */
  --secondary: #C4A77D;          /* sand-500 */
  --secondary-hover: #D4C4B0;    /* sand-400 */
  --secondary-light: #3d3428;    /* sand-tinted dark */
  --secondary-foreground: #0f172a;

  /* Accent - Earth/terracotta tones */
  --accent: #B87D73;             /* earth-400 */
  --accent-hover: #D4ADA5;       /* earth-300 */
  --accent-light: #3d2820;       /* earth-tinted dark */
  --accent-foreground: #0f172a;

  /* Text */
  --text-primary: #FDFCFA;       /* sand-50 */
  --text-secondary: #F0E9E0;     /* sand-200 */
  --text-muted: #D4C4B0;         /* sand-400 */
  --text-inverse: #152E22;       /* forest-900 */

  /* Borders - slate-based to complement backgrounds */
  --border: #334155;             /* slate-700 */
  --border-light: #1e293b;       /* slate-800 */
  --border-focus: #6B8B7D;       /* forest-400 - keeps Forest accent */

  /* Status (slightly lighter for dark mode) */
  --success: #73B89A;            /* sage-400 */
  --success-light: #2C5338;      /* sage-900 */

  --warning: #D4C4B0;            /* sand-400 */
  --warning-light: #4A3A30;      /* sand-900 */

  --error: #B87373;              /* burgundy-400 */
  --error-light: #3A1818;        /* burgundy-900 */

  --info: #6BA3AD;               /* teal-400 */
  --info-light: #1E3D47;         /* teal-900 */

  /* Gradients */
  --gradient-primary-from: #5B7B6D;
  --gradient-primary-to: #3D5A4C;
  --gradient-secondary-from: #C4A77D;
  --gradient-secondary-to: #A89070;
  --gradient-accent-from: #B87D73;
  --gradient-accent-to: #A65D4D;
}

/* =============================================================================
   BASE STYLES
   ============================================================================= */

@layer base {
  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
  }

  body {
    @apply bg-background text-content;
    overflow-x: hidden;
    position: relative;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: var(--surface-muted);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 9999px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--text-muted);
  }
}

/* =============================================================================
   COMPONENT LAYER - Semantic component styles
   ============================================================================= */

@layer components {
  /* Primary Button */
  .btn-primary {
    @apply px-6 py-3 bg-primary hover:bg-primary-hover text-primary-foreground font-medium rounded-xl shadow-soft transition-all duration-200;
  }

  .btn-primary:hover {
    @apply shadow-soft-md transform -translate-y-0.5;
  }

  .btn-primary:active {
    @apply transform translate-y-0 shadow-soft;
  }

  /* Secondary Button */
  .btn-secondary {
    @apply px-6 py-3 bg-secondary hover:bg-secondary-hover text-secondary-foreground font-medium rounded-xl shadow-soft transition-all duration-200;
  }

  /* Card - uses white surface */
  .card {
    @apply bg-surface rounded-2xl border border-border-light shadow-card transition-all duration-200;
  }

  .card:hover {
    @apply shadow-card-hover border-border;
  }

  /* Input - uses white surface */
  .input {
    @apply bg-surface border border-border rounded-lg px-4 py-2 text-content focus:outline-none focus:ring-2 focus:ring-border-focus focus:border-transparent transition-all;
  }

  /* Focus ring for accessibility */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-border-focus focus:ring-offset-2;
  }

  /* Legacy class aliases (for backward compatibility during migration) */
  .btn-tribe {
    @apply btn-primary;
  }

  .card-tribe {
    @apply card;
  }

  .text-tribe-accent {
    @apply text-primary;
  }

  /* Card animations */
  .card-flip {
    transform-style: preserve-3d;
    transition: transform 0.3s ease-out;
  }

  .card-flip.flipped {
    transform: rotateY(180deg);
  }

  /* Loading skeleton */
  .skeleton {
    @apply animate-pulse rounded;
    background: var(--surface-muted);
  }
}

/* =============================================================================
   UTILITY LAYER
   ============================================================================= */

@layer utilities {
  /* Perspective for 3D effects */
  .perspective-1000 {
    perspective: 1000px;
  }

  /* Text balance for better typography */
  .text-balance {
    text-wrap: balance;
  }

  /* Gradient text - using theme colors */
  .text-gradient {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(to right, var(--primary), var(--primary-hover));
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}

/* =============================================================================
   ANIMATIONS
   ============================================================================= */

@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes pulse-soft {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

@keyframes slide-up {
  0% {
    transform: translateY(100px);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes confetti {
  0% {
    transform: translateY(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(-200px) rotate(720deg);
    opacity: 0;
  }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

.animate-pulse-soft {
  animation: pulse-soft 2s ease-in-out infinite;
}

.animate-slide-up {
  animation: slide-up 0.5s ease-out forwards;
}

.animate-confetti {
  animation: confetti 1s ease-out forwards;
}

/* Animated gradient background */
@keyframes gradient-shift {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.animate-gradient {
  background-size: 200% 200%;
  animation: gradient-shift 8s ease infinite;
}

/* Glassmorphism - using theme colors */
.glass {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.dark .glass {
  background: rgba(21, 46, 34, 0.7); /* forest-900 with opacity */
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.glass-card {
  background: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
}

.dark .glass-card {
  background: rgba(30, 61, 47, 0.6); /* forest-800 with opacity */
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

/* Warm background - using theme sand colors */
.bg-warm {
  background: linear-gradient(135deg, var(--surface-subtle) 0%, var(--surface-muted) 50%, var(--surface-subtle) 100%);
}

/* Floating orbs for background effect */
.orb {
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  opacity: 0.5;
  pointer-events: none;
}

/* Gradient text animation */
@keyframes text-shimmer {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

.text-shimmer {
  background: linear-gradient(
    90deg,
    var(--primary) 0%,
    var(--info) 25%,
    var(--accent) 50%,
    var(--info) 75%,
    var(--primary) 100%
  );
  background-size: 200% auto;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: text-shimmer 4s linear infinite;
}

/* Fade-in-up animation for page load */
@keyframes fade-in-up {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fade-in-up 0.6s ease-out forwards;
}

/* Animation delay utilities */
.animation-delay-100 {
  animation-delay: 100ms;
}

.animation-delay-200 {
  animation-delay: 200ms;
}

.animation-delay-300 {
  animation-delay: 300ms;
}

.animation-delay-400 {
  animation-delay: 400ms;
}

.animation-delay-500 {
  animation-delay: 500ms;
}

/* Subtle scale animation on hover for cards */
@keyframes subtle-bounce {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.02);
  }
}

.hover-bounce:hover {
  animation: subtle-bounce 0.3s ease-out;
}
